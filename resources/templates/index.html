<html>
<head>
    <title>Spotifete</title>
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap-4.4.1-dist/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap-4.4.1-dist/bootstrap-grid.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap-4.4.1-dist/bootstrap-reboot.min.css">
    <script type="text/javascript" src="static/js/bootstrap-4.4.1-dist/bootstrap.min.js"></script>
    <script type="text/javascript" src="static/js/bootstrap-4.4.1-dist/bootstrap.bundle.min.js"></script>
</head>
<body class="bg-dark text-center text-white">
    <h1>Spotifete</h1>
    <p>Welcome! You can join an existing session or create a new one.</p>

    <form action="session/join">
        <label for="joinIdInput">session ID</label>
        <input id="joinIdInput" name="joinId"/>
        <button class="btn btn-primary" type="submit">Join</button>
    </form>

    {{ if .user }}
        <p>Logged in as {{ .user.SpotifyDisplayName }}</p>
        <p>Your active sessions:</p>
        <ul>
            {{ with .userSessions }}
                {{ range . }}
                    <li>
                        <a href="/session/join?joinId={{ .JoinId }}">{{ .Title }}</a>
                    </li>
                {{ end }}
            {{ end }}
        </ul>

        <a href="/session/new">Create new Session</a>

        <br/>

        <a href="spotify/logout">Log out</a>
    {{ else }}
        <a href="spotify/login">Log in to Spotify to create a new session or view your existing ones</a>
    {{ end }}

    <hr/>

    <p>The current time is {{ .time}}</p>
    <p>There are {{ .activeSessionCount}} active sessions ({{ .totalSessionCount}} total)</p>
</body>
</html>
